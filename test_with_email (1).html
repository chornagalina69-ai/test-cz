
<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Тест з цивільного захисту — Симулятор</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:#f3f4f6;color:#111;margin:0;padding:24px}
  .container{max-width:900px;margin:0 auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 6px 18px rgba(15,23,42,0.08)}
  h1{margin:0 0 12px;font-size:22px}
  .section{margin-bottom:20px;padding:14px;border-radius:6px;border:1px solid #e5e7eb}
  input[type=text], input[type=email]{width:100%;padding:8px;border:1px solid #d1d5db;border-radius:6px;margin-top:6px}
  button{background:#0ea5a4;color:white;border:none;padding:10px 14px;border-radius:6px;cursor:pointer;margin-top:12px}
  button:disabled{opacity:0.6;cursor:not-allowed}
</style>
</head>
<body>
<div class="container">
  <h1>Тест з цивільного захисту — Симулятор</h1>

  <div class="section">
    <h2>Введіть дані перед початком</h2>
    <label>Ваше ім’я:<br><input id="username" type="text" placeholder="Наприклад: Іван Петренко"></label><br><br>
    <label>Електронна адреса для отримання результатів:<br><input id="useremail" type="email" placeholder="example@gmail.com"></label>
    <button id="startBtn">Почати тест</button>
  </div>

  <div id="app" style="display:none"></div>

</div>

<script>
const questions = [
{ id:1, text:"Що означає попереджувальний сигнал “Увага всім!”?", options:{A:"Потрібно негайно евакуюватися",B:"Увімкнути радіо/телебачення для отримання повідомлення",C:"Виходити на вулицю",D:"Чекати на інструкції через месенджер"} },
{ id:2, text:"Який з нижче наведених об’єктів є захисною спорудою цивільного захисту?", options:{A:"Укриття в підземному переході",B:"Сховище або протирадіаційне укриття",C:"Балкон",D:"Будь-який приватний гараж"} },
{ id:3, text:"Основне призначення індивідуального перев’язочного пакета:", options:{A:"Дезактивація одягу",B:"Знезараження повітря",C:"Зупинка кровотечі та перев’язка ран",D:"Зниження радіаційного фону"} },
{ id:4, text:"Після сигналу сирени працівник не почув оголошення. Його перша дія?", options:{A:"Зателефонувати керівнику",B:"Увімкнути найближчий радіоприймач/телевізор",C:"Бігти до укриття",D:"Писати в месенджер колегам"} },
{ id:5, text:"Ситуаційне: Після сигналу сирени працівник не чув оголошення. Його перша дія?", options:{A:"Зателефонувати керівнику",B:"Увімкнути найближчий радіоприймач/телевізор",C:"Бігти до укриття",D:"Писати в месенджер колегам"} },
{ id:6, text:"Який вид випромінювання має найменшу проникну здатність?", options:{A:"Альфа",B:"Бета",C:"Гамма",D:"Нейтронне"} },
{ id:7, text:"Дезактивація — це:", options:{A:"Прання одягу",B:"Видалення радіоактивних речовин з поверхонь",C:"Очищення води",D:"Зниження температури"} },
{ id:8, text:"Ознакою радіаційного ураження НЕ є:", options:{A:"Нудота",B:"Запаморочення",C:"Лихоманка",D:"Підвищений апетит"} },
{ id:9, text:"Після виходу із забрудненої зони перша дія:", options:{A:"Прийняти їжу",B:"Провести санітарну обробку",C:"Пити воду",D:"Бігти додому"} },
{ id:10, text:"Ситуаційне: Після виходу із забрудненої зони перша дія?", options:{A:"Залишитися на місці",B:"Провести санітарну обробку",C:"Зателефонувати",D:"Інше"} },
{ id:11, text:"За шкалою МСК-64 землетрус у 7 балів є:", options:{A:"Помірним",B:"Дуже сильним",C:"Катастрофічним",D:"Слабким"} },
{ id:12, text:"При землетрусі в приміщенні найкраще:", options:{A:"Стати біля вікна",B:"Сховатися під міцний стіл",C:"Стояти під люстрою",D:"Бігти сходами вниз"} },
{ id:13, text:"Гідрометеорологічна НС включає:", options:{A:"Торф’яні пожежі",B:"Повінь",C:"Техногенну аварію",D:"Вулканічний вибух"} },
{ id:14, text:"Під час зсуву ґрунту слід:", options:{A:"Залишатися на місці",B:"Втекти перпендикулярно до його руху",C:"Спуститися вниз по схилу",D:"Ховатися у низині"} },
{ id:15, text:"Ситуаційне: Працівник почув характерний гул підлоги — початок землетрусу. Що робити?", options:{A:"Бігти до ліфта",B:"Відкрити вікна",C:"Заховатися у безпечній зоні (кут, простінок, під стіл)",D:"Ховатися в ванній кімнаті без вікон"} }
];

const answers = {
1:'B',2:'B',3:'C',4:'B',5:'B',6:'A',7:'B',8:'D',9:'B',10:'B',
11:'B',12:'B',13:'B',14:'B',15:'C'
};

let state = { index:0, choices:{} };

function grade(){
  let score=0;
  for(const q of questions){
    if(state.choices[q.id] === answers[q.id]) score++;
  }
  return score;
}

function render(){
  const app = document.getElementById('app');

  if(state.showResults){
    const score = grade();
    const total = questions.length;

    const name = document.getElementById("username").value;
    const email = document.getElementById("useremail").value;

    const summary = questions.map(q=>{
      return `${q.id}. ${q.text}
Ваше: ${state.choices[q.id]||"—"}
Правильна: ${answers[q.id]}
`.trim();
    }).join("\n\n");

    const mailBody = encodeURIComponent(
`Ім’я: ${name}
Результат: ${score} / ${total}

Деталізація:
${summary}
`
    );

    app.innerHTML = `
      <h2>Результат</h2>
      <p>Набрано: <strong>${score}</strong> із ${total}</p>
      <a href="mailto:${email}?subject=Результати тесту з ЦЗ&body=${mailBody}">
        <button>Надіслати результати на email</button>
      </a>
      <button id="restart">Пройти знову</button>
    `;

    document.getElementById("restart").onclick = ()=>{
      state = {index:0, choices:{}, showResults:false};
      render();
    };
    return;
  }

  const q = questions[state.index];
  app.innerHTML = `
    <h2>Питання ${state.index+1} із ${questions.length}</h2>
    <p>${q.text}</p>
    ${Object.entries(q.options).map(([k,v])=>`
      <label>
        <input type="radio" name="q${q.id}" value="${k}" ${state.choices[q.id]===k?'checked':''}>
        ${k}. ${v}
      </label><br>
    `).join("")}
    <br>
    <button id="prevBtn" ${state.index===0?'disabled':''}>Попереднє</button>
    <button id="nextBtn" ${state.index===questions.length-1?'disabled':''}>Наступне</button>
    <button id="finishBtn">Завершити тест</button>
  `;

  document.getElementsByName(`q${q.id}`).forEach(inp=>{
    inp.onchange = e=>{
      state.choices[q.id] = e.target.value;
    };
  });

  document.getElementById("prevBtn").onclick = ()=>{
    if(state.index>0){ state.index--; render(); }
  };
  document.getElementById("nextBtn").onclick = ()=>{
    if(state.index<questions.length-1){ state.index++; render(); }
  };
  document.getElementById("finishBtn").onclick = ()=>{
    state.showResults = true;
    render();
  };
}

document.getElementById("startBtn").onclick = ()=>{
  const name = document.getElementById("username").value.trim();
  const email = document.getElementById("useremail").value.trim();
  if(!name || !email){
    alert("Будь ласка, заповніть ім’я та email.");
    return;
  }
  document.querySelector(".section").style.display = "none";
  document.getElementById("app").style.display = "block";
  render();
};
</script>
</body>
</html>
