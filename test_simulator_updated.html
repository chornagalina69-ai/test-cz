<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Тест з Цивільного Захисту</title>
<style>
body { font-family: Arial, sans-serif; background: #f3f4f6; padding: 20px; }
.container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
h1 { text-align: center; }
.question { margin-bottom: 20px; }
.answers label { display: block; margin: 5px 0; }
.hidden { display: none; }
button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; background: #4CAF50; color: white; cursor: pointer; }
button:hover { background: #45a049; }
#timer { font-weight: bold; text-align: right; margin-bottom: 10px; }
</style>
</head>
<body>
<div class="container">
  <h1>Тест з Цивільного Захисту</h1>
  
  <div id="nameScreen">
    <label>Введіть ваше ім'я (обов'язково):</label>
    <input type="text" id="userName" placeholder="Ваше ім'я">
    <button onclick="startTest()">Почати тест</button>
  </div>

  <div id="testScreen" class="hidden">
    <div id="timer">Час: 50:00</div>
    <div id="questionContainer"></div>
    <div>
      <button onclick="prevQuestion()">Назад</button>
      <button onclick="nextQuestion()">Вперед</button>
      <button onclick="finishTest()">Завершити</button>
    </div>
  </div>

  <div id="resultScreen" class="hidden"></div>
</div>

<script>
const questions = [
  {id:1, text:"Що означає попереджувальний сигнал “Увага всім!”?", options:{A:"Потрібно негайно евакуюватися", B:"Увімкнути радіо/телебачення для отримання повідомлення", C:"Виходити на вулицю", D:"Чекати на інструкції через месенджер"}},
  {id:2, text:"Який з нижче наведених об’єктів є захисною спорудою цивільного захисту?", options:{A:"Укриття в підземному переході", B:"Сховище або протирадіаційне укриття", C:"Балкон", D:"Будь-який приватний гараж"}},
  {id:3, text:"Основне призначення індивідуального перев’язочного пакета:", options:{A:"Дезактивація одягу", B:"Знезараження повітря", C:"Зупинка кровотечі та перев’язка ран", D:"Зниження радіаційного фону"}}
];

const correctAnswers = {1:"B", 2:"B", 3:"C"};

let currentQuestion = 0;
let userAnswers = Array(questions.length).fill(null);
let timer;
let timeLeft = 50*60;

function startTest() {
  const name = document.getElementById('userName').value.trim();
  if(!name) { alert("Введіть ваше ім'я!"); return; }
  localStorage.setItem("userName", name);
  document.getElementById('nameScreen').classList.add('hidden');
  document.getElementById('testScreen').classList.remove('hidden');
  showQuestion();
  timer = setInterval(updateTimer, 1000);
}

function updateTimer() {
  if(timeLeft <= 0) { finishTest(); return; }
  timeLeft--;
  const min = Math.floor(timeLeft/60).toString().padStart(2,'0');
  const sec = (timeLeft%60).toString().padStart(2,'0');
  document.getElementById('timer').textContent = `Час: ${min}:${sec}`;
}

function showQuestion() {
  const q = questions[currentQuestion];
  const container = document.getElementById('questionContainer');
  container.innerHTML = `<div class="question"><b>Питання ${currentQuestion+1}:</b> ${q.text}</div>`;
  let html = '<div class="answers">';
  for (let key in q.options) {
    html += `<label><input type="radio" name="answer" value="${key}" ${userAnswers[currentQuestion]===key?'checked':''}> ${key}: ${q.options[key]}</label>`;
  }
  html += '</div>';
  container.innerHTML += html;
}

function nextQuestion() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if(selected) userAnswers[currentQuestion] = selected.value;
  if(currentQuestion < questions.length-1) { currentQuestion++; showQuestion(); }
}

function prevQuestion() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if(selected) userAnswers[currentQuestion] = selected.value;
  if(currentQuestion > 0) { currentQuestion--; showQuestion(); }
}

function finishTest() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if(selected) userAnswers[currentQuestion] = selected.value;
  clearInterval(timer);

  let score = 0;
  questions.forEach((q,i)=>{ if(userAnswers[i]===correctAnswers[q.id]) score++; });

  const percent = Math.round((score/questions.length)*100);
  const resultScreen = document.getElementById('resultScreen');
  document.getElementById('testScreen').classList.add('hidden');
  resultScreen.classList.remove('hidden');

  const name = localStorage.getItem("userName");

  resultScreen.innerHTML = `<h2>${percent>=50?'Вітаємо':'На жаль'}, ${name}!</h2>
    <p>Ваш результат: ${score}/${questions.length} (${percent}%)</p>`;
}
</script>
</body>
</html>
