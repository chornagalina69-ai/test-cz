<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Тест — 55 питань</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    body{
        font-family: system-ui;
        background:#f3f4f6;
        margin:0;
        padding:20px;
    }
    .container{
        max-width:900px;
        margin:0 auto;
        background:white;
        padding:20px;
        border-radius:10px;
        box-shadow:0 4px 15px rgba(0,0,0,0.15);
    }
    h1{margin-top:0;}
    .question-box{
        border:1px solid #ddd;
        border-radius:8px;
        padding:15px;
        margin-top:15px;
    }
    .options label{
        display:block;
        padding:8px;
        border:1px solid #ddd;
        border-radius:6px;
        margin-bottom:6px;
        cursor:pointer;
    }
    .controls{
        display:flex;
        justify-content:space-between;
        margin-top:15px;
    }
    button{
        background:#009688;
        color:white;
        border:none;
        padding:10px 20px;
        border-radius:6px;
        cursor:pointer;
    }
    button:disabled{
        background:#ccc;
        cursor:not-allowed;
    }
    .secondary{
        background:#e5e7eb;
        color:black;
    }
    .timer{
        font-size:20px;
        font-weight:bold;
        color:#c62828;
        margin-bottom:10px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Тест (55 питань)</h1>

    <div class="timer">Час: <span id="time">30:00</span></div>

    <div>
        <label><strong>Ваше ПІБ:</strong></label><br>
        <input id="username" type="text" style="width:100%;padding:8px;margin-top:5px;">
    </div>

    <div style="margin-top:15px;">
        <label><strong>Ваша Email адреса:</strong></label><br>
        <input id="email" type="email" style="width:100%;padding:8px;margin-top:5px;">
    </div>

    <button style="margin-top:15px;" onclick="startTest()">Почати тест</button>

    <div id="app"></div>
</div>

<script>
/* ======================= ЗАПИТАННЯ (55) ======================= */
const QUESTIONS = [
{ id:1, text:"Що означає попереджувальний сигнал “Увага всім!”?", options:{A:"Потрібно негайно евакуюватися", B:"Увімкнути радіо/телебачення для отримання повідомлення", C:"Виходити на вулицю", D:"Чекати на інструкції через месенджер"} },
{ id:2, text:"Який з наведених об’єктів є захисною спорудою цивільного захисту?", options:{A:"Укриття в підземному переході", B:"Сховище або протирадіаційне укриття", C:"Балкон", D:"Будь-який приватний гараж"} },
{ id:3, text:"Основне призначення індивідуального перев’язочного пакета:", options:{A:"Дезактивація одягу", B:"Знезараження повітря", C:"Зупинка кровотечі та перев’язка ран", D:"Зниження радіаційного фону"} },
{ id:4, text:"Що робити при отриманні сигналу евакуації на підприємстві?", options:{A:"Ігнорувати і завершити наявні справи", B:"Негайно слідувати вказаному маршруту евакуації", C:"Зачекати офіційного повідомлення в чаті", D:"Залишитися на робочому місці"} },
{ id:5, text:"Після сигналу сирени працівник не почув оголошення. Його перша дія?", options:{A:"Зателефонувати керівнику", B:"Увімкнути найближчий радіоприймач/телевізор", C:"Бігти до укриття", D:"Писати в месенджер колегам"} },
{ id:6, text:"Який вид випромінювання має найменшу проникну здатність?", options:{A:"Альфа", B:"Бета", C:"Гамма", D:"Нейтронне"} },
{ id:7, text:"Дезактивація — це:", options:{A:"Прання одягу", B:"Видалення радіоактивних речовин з поверхонь", C:"Очищення води", D:"Зниження температури"} },
{ id:8, text:"Ознакою радіаційного ураження НЕ є:", options:{A:"Нудота", B:"Запаморочення", C:"Лихоманка", D:"Підвищений апетит"} },
{ id:9, text:"Після виходу із забрудненої зони перша дія:", options:{A:"Прийняти їжу", B:"Провести санітарну обробку", C:"Пити воду", D:"Бігти додому"} },
{ id:10, text:"Яка дія при підозрі на радіаційну небезпеку є правильною?", options:{A:"Перебувати без руху на місці", B:"Негайно увімкнути радіо/ТБ і дочекатися інструкцій", C:"Йти до найближчого вікна", D:"Ігнорувати попередження"} },

{ id:11, text:"За шкалою МСК-64 землетрус у 7 балів є:", options:{A:"Помірним", B:"Дуже сильним", C:"Катастрофічним", D:"Слабким"} },
{ id:12, text:"При землетрусі в приміщенні найкраще:", options:{A:"Стати біля вікна", B:"Сховатися під міцний стіл", C:"Стояти під люстрою", D:"Бігти сходами вниз"} },
{ id:13, text:"Гідрометеорологічна НС включає:", options:{A:"Торф’яні пожежі", B:"Повінь", C:"Техногенну аварію", D:"Вулканічний вибух"} },
{ id:14, text:"Під час зсуву ґрунту слід:", options:{A:"Залишатися на місці", B:"Втекти перпендикулярно до його руху", C:"Спуститися вниз по схилу", D:"Ховатися у низині"} },
{ id:15, text:"Працівник почув гул підлоги — початок землетрусу. Що робити?", options:{A:"Бігти до ліфта", B:"Відкрити вікна", C:"Заховатися у безпечній зоні (кут, простінок, під стіл)", D:"Ховатися в ванній кімнаті без вікон"} },

{ id:16, text:"СДОР — це:", options:{A:"Сильно діючі отруйні речовини", B:"Стабільні дерматологічні органічні реагенти", C:"Суміш дезінфекційних органічних речовин", D:"Стандартизовані джерела органічного розпаду"} },
{ id:17, text:"Найбільш небезпечні властивості ХНР:", options:{A:"Колір", B:"Запах", C:"Токсичність і леткість", D:"Здатність до висихання"} },
{ id:18, text:"Перший спосіб захисту при хімічній аварії:", options:{A:"Вимити підлогу", B:"Герметизувати приміщення", C:"Відкрити двері", D:"Вийти на дах"} },
{ id:19, text:"У разі запаху хлору в повітрі найкраще:", options:{A:"Піднятися на верхні поверхи", B:"Спуститися в підвал", C:"Викликати таксі", D:"Продовжити роботу"} },
{ id:20, text:"В офісі почувся сигнал про викид аміаку. Дії?", options:{A:"Зачинити вікна, змочити марлю і прикрити рот", B:"Вийти на вулицю", C:"Лягти на підлогу", D:"Увімкнути кондиціонер"} },

{ id:21, text:"Найпоширеніша причина пожеж у офісах:", options:{A:"Витік води", B:"Порушення електробезпеки", C:"Відсутність вентиляції", D:"Використання кондиціонера"} },
{ id:22, text:"Який вогнегасник підходить для електроприладів?", options:{A:"Пінний", B:"Водяний", C:"Вуглекислотний", D:"Порошковий лише на відкритому повітрі"} },
{ id:23, text:"Який клас пожежі не стосується горіння газів?", options:{A:"A", B:"B", C:"C", D:"E"} },
{ id:24, text:"Під час пожежі в будівлі потрібно:", options:{A:"Користуватися ліфтом", B:"Рухатися до виходу в напрямку протидиму", C:"Ховатися під меблями", D:"Відкривати всі вікна"} },
{ id:25, text:"У приміщенні задимлення. Перша правильна дія?", options:{A:"Дихати через мокру тканину і покинути зону", B:"Вимкнути комп’ютер", C:"Бігти по сходах угору", D:"Відчинити всі двері"} },

{ id:26, text:"Головна небезпека масового скупчення:", options:{A:"Нестача води", B:"Паніка та тиснява", C:"Холод", D:"Наявність камер"} },
{ id:27, text:"Під час тисняви найнебезпечніше:", options:{A:"Тримати руки в кишенях", B:"Стояти боком і захищати грудну клітку", C:"Нахилитися вниз", D:"Знімати одяг"} },
{ id:28, text:"Який захід НЕ належить до профілактики інфекцій?", options:{A:"Мити руки", B:"Носити маску", C:"Уживати антибіотики без призначення", D:"Дотримуватися дистанції"} },
{ id:29, text:"При кашлі хворого в приміщенні слід:", options:{A:"Вимкнути вентиляцію", B:"Забезпечити провітрювання", C:"Закрити всі вікна", D:"Сісти поруч"} },
{ id:30, text:"Під час евакуації з ТЦ почалася тиснява. Твої дії?", options:{A:"Підняти руки на рівень грудей, рухатися з натовпом", B:"Зупинитися посеред потоку", C:"Сісти на підлогу", D:"Тримати телефон у руках"} },

{ id:31, text:"Перше, що треба зробити при наданні допомоги:", options:{A:"Відразу накласти пов’язку", B:"Оцінити безпеку місця", C:"Викликати начальника", D:"Дати води потерпілому"} },
{ id:32, text:"Зупинка серця визначається за:", options:{A:"Почервонінням шкіри", B:"Відсутністю пульсу і дихання", C:"Потовиділенням", D:"Судомами"} },
{ id:33, text:"Спосіб 'рот у рот' застосовується для:", options:{A:"Зупинки кровотечі", B:"Штучного дихання", C:"Іммобілізації", D:"Зниження температури"} },
{ id:34, text:"При артеріальній кровотечі кров має колір:", options:{A:"Темно-вишневий", B:"Яскраво-червоний і пульсує", C:"Жовтий", D:"Чорний"} },
{ id:35, text:"Людина втратила свідомість і не дихає. Твої дії?", options:{A:"Побризкати водою", B:"Почати СЛР (30 компресій — 2 вдування)", C:"Дати нашатир", D:"Розтирати руки потерпілому"} },

{ id:36, text:"Яка хімічна речовина важча за повітря?", options:{A:"Аміак", B:"Хлор", C:"Метан", D:"Водень"} },
{ id:37, text:"Чим визначають токсичність речовини?", options:{A:"Концентрацією", B:"Запахом", C:"Густотою", D:"Температурою"} },
{ id:38, text:"Чи можна користуватися кондиціонером під час хімічної аварії?", options:{A:"Так", B:"Так, якщо тепло", C:"Ні", D:"Так, якщо приміщення прохолодне"} },
{ id:39, text:"Найпоширеніший спосіб зараження ХНР:", options:{A:"Дотик", B:"Інгаляція", C:"Тиск", D:"Світло"} },
{ id:40, text:"Під час роботи працівник впав у зону хімічної хмари. Перше, що треба зробити?", options:{A:"Внести його в укриття", B:"Винести на свіже повітря проти вітру", C:"Дати йому води", D:"Зняти одяг із співробітника"} },

{ id:41, text:"Хто відповідає за організацію цивільного захисту на підприємстві?", options:{A:"Керівник підрозділу кадрів", B:"Керівник об’єкта/підприємства (директор)", C:"Сторонній консультант", D:"Підрядник з охорони"} },
{ id:42, text:"Комісія з НС створюється:", options:{A:"Лише в державних органах", B:"На об’єкті, підприємстві, установі", C:"Тільки у військових частинах", D:"Тільки в школах"} },
{ id:43, text:"Під час НС хто координує рятувальні роботи?", options:{A:"Директор з маркетингу", B:"Керівник робіт з ліквідації НС", C:"Черговий охоронець", D:"Волонтер"} },
{ id:44, text:"Який обов’язок працівників у сфері ЦЗ?", options:{A:"Уникати навчань", B:"Виконувати правила безпеки", C:"Ігнорувати інструкції", D:"Вести відеозйомку НС"} },
{ id:45, text:"Працівник дізнався про пожежу на сусідньому поверсі. Його перша дія?", options:{A:"Продовжувати роботу", B:"Повідомити керівництво та розпочати евакуацію", C:"Ховатися під стіл", D:"Викликати таксі"} },

{ id:46, text:"Що є основним документом, який визначає дії персоналу під час загрози або виникнення НС на підприємстві?", options:{A:"Журнал інструктажів", B:"Об’єктовий план реагування на надзвичайні ситуації", C:"План пожежогасіння", D:"Календар навчань"} },
{ id:47, text:"Що входить до прогнозованих небезпек, які враховуються в об’єктовому плані реагування?", options:{A:"Лише економічні ризики", B:"Природні загрози та небезпечні виробничі фактори", C:"Зміни у кадровому складі", D:"Погодні умови без аномалій"} },
{ id:48, text:"Яку функцію виконує об’єктова система оповіщення?", options:{A:"Контроль робочого часу персоналу", B:"Повідомлення працівників про загрозу або виникнення НС", C:"Ведення електронної пошти в кризових умовах", D:"Заміна радіаційного моніторингу"} },
{ id:49, text:"Які дії працівника при отриманні сигналу щодо аварійної зупинки виробництва?", options:{A:"Завершити особисті справи", B:"Негайно виконати дії своїх інструкцій і відключити обладнання", C:"Зачекати додаткових вказівок у чаті колег", D:"Самостійно змінити маршрут евакуації"} },
{ id:50, text:"Що робить персонал після аварійної зупинки обладнання згідно з планом реагування?", options:{A:"Повертається до роботи", B:"Залишається на місці, чекаючи дозволу", C:"Негайно залишає небезпечну зону за встановленими шляхами", D:"Перевіряє документацію"} },

{ id:51, text:"Сталася аварія з загрозою небезпечних факторів. Об’єктова система оповіщення подала сигнал. Яка дія правильна?", options:{A:"Вимкнути звук та продовжувати роботу", B:"Виконати інструкції маршруту евакуації", C:"Збирати речі та чекати колег", D:"Вийти до парковки шукати керівника"} },
{ id:52, text:"Яке основне завдання аварійної зупинки виробництва?", options:{A:"Мінімізувати час простою", B:"Запобігти розвитку небезпечних факторів", C:"Зменшити витрати матеріалів", D:"Підготувати систему до ремонту"} },
{ id:53, text:"Як забезпечуються працівники ЗІЗ згідно з планом реагування?", options:{A:"За бажанням кожного", B:"Видача ЗІЗ відбувається до початку роботи або під час загрози", C:"Лише після НС", D:"ЗІЗ видаються тільки керівному складу"} },
{ id:54, text:"План передбачає альтернативний вихід. Коридор задимлений. Які дії?", options:{A:"Повернутися на робоче місце", B:"Використати альтернативний шлях згідно з планом евакуації", C:"Відчинити всі двері", D:"Чекати інших працівників"} },
{ id:55, text:"Яку роль відіграє інструкція персоналу у плані реагування на НС?", options:{A:"Містить особисті рекомендації", B:"Визначає обов’язкові дії працівників у конкретних аварійних ситуаціях", C:"Використовується тільки під час навчань", D:"Є формальним документом без практичного значення"} }
];

/* ======================= ПРАВИЛЬНІ ВІДПОВІДІ ======================= */
const ANSWERS = {
1:"B",2:"B",3:"C",4:"B",5:"B",6:"A",7:"B",8:"D",9:"B",10:"B",
11:"B",12:"B",13:"B",14:"B",15:"C",16:"A",17:"C",18:"B",19:"B",20:"A",
21:"B",22:"C",23:"A",24:"B",25:"A",26:"B",27:"B",28:"C",29:"B",30:"A",
31:"B",32:"B",33:"B",34:"B",35:"B",36:"B",37:"A",38:"C",39:"B",40:"B",
41:"B",42:"B",43:"B",44:"B",45:"B",46:"B",47:"B",48:"B",49:"B",50:"C",
51:"B",52:"B",53:"B",54:"B",55:"B"
};
let state = {
    index:0,
    choices:{},
    started:false,
    finished:false
};

// ---- ТАЙМЕР ----
let timeLeft = 30 * 60;
let timer;

function startTimer(){
    timer = setInterval(()=>{
        let m = Math.floor(timeLeft/60);
        let s = timeLeft % 60;
        document.getElementById("time").textContent = `${m}:${s.toString().padStart(2,'0')}`;

        if(timeLeft <= 0){
            clearInterval(timer);
            finishTest();
        }
        timeLeft--;
    },1000);
}

// ---- ПОЧАТОК ТЕСТУ ----
function startTest(){
    const username = document.getElementById("username").value.trim();
    const email = document.getElementById("email").value.trim();

    if (!username){
        alert("Будь ласка, введіть ПІБ.");
        return;
    }
    if (!email){
        alert("Будь ласка, введіть вашу email адресу.");
        return;
    }

    state.started = true;
    startTimer();
    render();
}

// ---- РЕНДЕР ----
function render(){
    const app = document.getElementById("app");

    if (!state.started){
        app.innerHTML = "";
        return;
    }

    if (state.finished){
        showResults();
        return;
    }

    const q = questions[state.index];
    app.innerHTML = `
        <div class="question-box">
            <strong>Питання ${state.index+1} із ${questions.length}:</strong><br><br>
            ${q.text}<br><br>

            <div class="options">
                ${Object.entries(q.options).map(([k,v]) => `
                    <label>
                        <input type="radio" name="q${q.id}" value="${k}" ${state.choices[q.id]===k?'checked':''}>
                        <strong>${k}.</strong> ${v}
                    </label>
                `).join("")}
            </div>

            <div class="controls">
                <button class="secondary" onclick="prev()" ${state.index===0?'disabled':''}>Назад</button>
                <button class="secondary" onclick="next()" ${state.index===questions.length-1?'disabled':''}>Далі</button>
                <button onclick="finishTest()">Завершити</button>
            </div>
        </div>
    `;

    document.querySelectorAll("input[type=radio]").forEach(el=>{
        el.addEventListener("change", e=>{
            state.choices[q.id] = e.target.value;
        });
    });
}

// ---- НАВІГАЦІЯ ----
function next(){
    state.index++;
    render();
}
function prev(){
    state.index--;
    render();
}

// ---- ЗАВЕРШЕННЯ ----
function finishTest(){
    state.finished = true;
    clearInterval(timer);
    render();
}

function grade(){
    let score = 0;
    for (let q of questions){
        if (state.choices[q.id] === answers[q.id]) score++;
    }
    return score;
}

// ---- ВІДПРАВКА EMAIL ----
function sendEmail(text){
    const userEmail = document.getElementById("email").value;

    fetch("https://formsubmit.co/ajax/chorna.galina69@gmail.com", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({
            message: text + "\nEmail користувача: " + userEmail
        })
    });
}

// ---- РЕЗУЛЬТАТ ----
function showResults(){
    const app = document.getElementById("app");
    const score = grade();
    const total = questions.length;
    const percent = Math.round(score/total*100);

    const passed = percent >= 50;
    const statusText = passed ? "Тест складено ✔" : "Тест НЕ складено ✖";

    const username = document.getElementById("username").value;

    const message =
        `ПІБ: ${username}\n`+
        `Результат: ${score} із ${total} (${percent}%)\n`+
        `Статус: ${statusText}`;

    sendEmail(message);

    app.innerHTML = `
        <div class="question-box" style="text-align:center;">
            <h2>${statusText}</h2>
            <p><strong>${score}</strong> із ${total}</p>
            <p>${percent}%</p>
            <button onclick="location.reload()">Пройти ще раз</button>
        </div>
    `;
}
</script>

</body>
</html>
