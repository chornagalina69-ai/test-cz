<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Тест з Цивільного Захисту</title>
<style>
body { font-family: Arial, sans-serif; background: #f3f4f6; padding: 20px; }
.container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
h1 { text-align: center; }
.question { margin-bottom: 20px; }
.answers label { display: block; margin: 5px 0; }
.hidden { display: none; }
button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; background: #4CAF50; color: white; cursor: pointer; }
button:hover { background: #45a049; }
#timer { font-weight: bold; text-align: right; margin-bottom: 10px; }
</style>
</head>
<body>
<div class="container">
  <h1>Тест з Цивільного Захисту</h1>
  
  <div id="nameScreen">
    <label>Введіть ваше ім'я (обов'язково):</label>
    <input type="text" id="userName" placeholder="Ваше ім'я">
    <button onclick="startTest()">Почати тест</button>
  </div>

  <div id="testScreen" class="hidden">
    <div id="timer">Час: 50:00</div>
    <div id="questionContainer"></div>
    <div>
      <button onclick="prevQuestion()">Назад</button>
      <button onclick="nextQuestion()">Вперед</button>
      <button onclick="finishTest()">Завершити</button>
    </div>
  </div>

  <div id="resultScreen" class="hidden"></div>
</div>

<script>
const questions = [
{ id:1, text:"Що означає попереджувальний сигнал “Увага всім!”?", options:{A:"Потрібно негайно евакуюватися", B:"Увімкнути радіо/телебачення для отримання повідомлення", C:"Виходити на вулицю", D:"Чекати на інструкції через месенджер"} },
{ id:2, text:"Який з нижче наведених об’єктів є захисною спорудою цивільного захисту?", options:{A:"Укриття в підземному переході", B:"Сховище або протирадіаційне укриття", C:"Балкон", D:"Будь-який приватний гараж"} },
{ id:3, text:"Основне призначення індивідуального перев’язочного пакета:", options:{A:"Дезактивація одягу", B:"Знезараження повітря", C:"Зупинка кровотечі та перев’язка ран", D:"Зниження радіаційного фону"} },
{ id:4, text:"Після сигналу сирени працівник не чув оголошення. Його перша дія?", options:{A:"Зателефонувати керівнику", B:"Увімкнути найближчий радіоприймач/телевізор", C:"Бігти до укриття", D:"Писати в месенджер колегам"} },
{ id:5, text:"Який вид випромінювання має найменшу проникну здатність?", options:{A:"Альфа", B:"Бета", C:"Гамма", D:"Нейтронне"} },
{ id:6, text:"Дезактивація — це:", options:{A:"Прання одягу", B:"Видалення радіоактивних речовин з поверхонь", C:"Очищення води", D:"Зниження температури"} },
{ id:7, text:"Ознакою радіаційного ураження НЕ є:", options:{A:"Нудота", B:"Запаморочення", C:"Лихоманка", D:"Підвищений апетит"} },
{ id:8, text:"Після виходу із забрудненої зони перша дія:", options:{A:"Прийняти їжу", B:"Провести санітарну обробку", C:"Пити воду", D:"Бігти додому"} },
{ id:9, text:"За шкалою МСК-64 землетрус у 7 балів є:", options:{A:"Помірним", B:"Дуже сильним", C:"Катастрофічним", D:"Слабким"} },
{ id:10, text:"При землетрусі в приміщенні найкраще:", options:{A:"Стати біля вікна", B:"Сховатися під міцний стіл", C:"Стояти під люстрою", D:"Бігти сходами вниз"} },
{ id:11, text:"Гідрометеорологічна НС включає:", options:{A:"Торф’яні пожежі", B:"Повінь", C:"Техногенну аварію", D:"Вулканічний вибух"} },
{ id:12, text:"Під час зсуву ґрунту слід:", options:{A:"Залишатися на місці", B:"Втекти перпендикулярно до його руху", C:"Спуститися вниз по схилу", D:"Ховатися у низині"} },
{ id:13, text:"Працівник почув характерний гул підлоги — початок землетрусу. Що робити?", options:{A:"Бігти до ліфта", B:"Відкрити вікна", C:"Заховатися у безпечній зоні (кут, простінок, під стіл)", D:"Ховатися в ванній кімнаті без вікон"} },
{ id:14, text:"СДОР — це:", options:{A:"Сильно діючі отруйні речовини", B:"Стабільні дерматологічні органічні реагенти", C:"Суміш дезінфекційних органічних речовин", D:"Стандартизовані джерела органічного розпаду"} },
{ id:15, text:"Найбільш небезпечні властивості ХНР:", options:{A:"Колір", B:"Запах", C:"Токсичність і леткість", D:"Здатність до висихання"} },
{ id:16, text:"Перший спосіб захисту при хімічній аварії:", options:{A:"Вимити підлогу", B:"Герметизувати приміщення", C:"Відкрити двері", D:"Вийти на дах"} },
{ id:17, text:"У разі запаху хлору в повітрі найкраще:", options:{A:"Піднятися на верхні поверхи", B:"Спуститися в підвал", C:"Викликати таксі", D:"Продовжити роботу"} },
{ id:18, text:"В офісі команда почула сирену та отримала повідомлення про викид аміаку. Дії?", options:{A:"Зачинити вікна, змочити марлю і прикрити рот", B:"Вийти на вулицю", C:"Лягти на підлогу", D:"Увімкнути кондиціонер"} },
{ id:19, text:"Найпоширеніша причина пожеж у офісах:", options:{A:"Витік води", B:"Порушення електробезпеки", C:"Відсутність вентиляції", D:"Використання кондиціонера"} },
{ id:20, text:"Який вогнегасник підходить для електроприладів?", options:{A:"Пінний", B:"Водяний", C:"Вуглекислотний", D:"Порошковий лише на відкритому повітрі"} },
// … додаємо всі питання до 55
];

const correctAnswers = {
1:"B",2:"B",3:"C",4:"B",5:"A",6:"B",7:"D",8:"B",9:"B",10:"B",
11:"B",12:"B",13:"C",14:"A",15:"C",16:"B",17:"B",18:"A",19:"B",20:"C",
// … додаємо всі правильні відповіді до 55
};

let currentQuestion = 0;
let userAnswers = Array(questions.length).fill(null);
let timer;
let timeLeft = 50*60;

function startTest() {
  const name = document.getElementById('userName').value.trim();
  if(!name) { alert("Введіть ваше ім'я!"); return; }
  localStorage.setItem("userName", name);
  document.getElementById('nameScreen').classList.add('hidden');
  document.getElementById('testScreen').classList.remove('hidden');
  showQuestion();
  timer = setInterval(updateTimer, 1000);
}

function updateTimer() {
  if(timeLeft <= 0) { finishTest(); return; }
  timeLeft--;
  const min = Math.floor(timeLeft/60).toString().padStart(2,'0');
  const sec = (timeLeft%60).toString().padStart(2,'0');
  document.getElementById('timer').textContent = `Час: ${min}:${sec}`;
}

function showQuestion() {
  const q = questions[currentQuestion];
  const container = document.getElementById('questionContainer');
  container.innerHTML = `<div class="question"><b>Питання ${currentQuestion+1}:</b> ${q.text}</div>`;
  let html = '<div class="answers">';
  for (let key in q.options) {
    html += `<label><input type="radio" name="answer" value="${key}" ${userAnswers[currentQuestion]===key?'checked':''}> ${key}: ${q.options[key]}</label>`;
  }
  html += '</div>';
  container.innerHTML += html;
}

function nextQuestion() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if(selected) userAnswers[currentQuestion] = selected.value;
  if(currentQuestion < questions.length-1) { currentQuestion++; showQuestion(); }
}

function prevQuestion() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if(selected) userAnswers[currentQuestion] = selected.value;
  if(currentQuestion > 0) { currentQuestion--; showQuestion(); }
}

function finishTest() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if(selected) userAnswers[currentQuestion] = selected.value;
  clearInterval(timer);

  let score = 0;
  questions.forEach((q,i)=>{ if(userAnswers[i]===correctAnswers[q.id]) score++; });

  const percent = Math.round((score/questions.length)*100);
  const resultScreen = document.getElementById('resultScreen');
  document.getElementById('testScreen').classList.add('hidden');
  resultScreen.classList.remove('hidden');

  const name = localStorage.getItem("userName");

  if(percent >= 50) {
    resultScreen.innerHTML = `<h2>Вітаємо, ${name}! Тест складено.</h2><p>Ваш результат: ${score}/${questions.length} (${percent}%)</p><p>Результат відправлено на пошту.</p>`;
    const form = document.createElement('form');
    form.action = "https://formsubmit.co/chorna.galina69@gmail.com";
    form.method = "POST";
    form.target = "_blank";
    form.style.display = "none";
    form.appendChild(createInput("Ім'я", name));
    form.appendChild(createInput("Результат", `${score}/${questions.length} (${percent}%)`));
    document.body.appendChild(form);
    form.submit();
  } else {
    resultScreen.innerHTML = `<h2>На жаль, ${name}. Тест не складено.</h2><p>Ваш результат: ${score}/${questions.length} (${percent}%)</p>`;
  }
}

function createInput(name, value){
  const input = document.createElement('input');
  input.type = 'hidden';
  input.name = name;
  input.value = value;
  return input;
}
</script>
</body>
</html>
